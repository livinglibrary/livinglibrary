<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap4.min.css" />
		<link rel="stylesheet" type="text/css" href="css/aindex.css" />

		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.cookie.js"></script>
		<script src="js/bootstrap4.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../js/bootstrap-paginator.min.js"></script>
		<script src="js/common.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/delayLoading.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="css/perResume.css" />
	</head>

	<body>
		<div id="all">
			<nav class="navbar navbar-expand-md navbar-light">
			<div  id="logo">
					<img src="images/logo.png" />
			</div>
				
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
				<div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="/aindex">首页</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">消息  </a>
							<div class="dropdown-menu" style="padding:0;margin:0;">
								<div class="card" style="width: 23rem;padding:0;margin:0;">
								  <div class="card-body" style="padding:0;margin:0;">
								    <div class="list-group notice">
									 
									</div>
								  </div>
								</div>
							</div>
						</li>
						
						<li class="nav-item">
							<a class="nav-link" href="/avedio">直播</a>
						</li>
						<li class="nav-item">
							<a class="nav-link personal" href="#">个人中心</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/alogin" id="d_login">登录</a>
							<a class="nav-link" id="welcome">欢迎您&nbsp;<span id="s_name"></span></a>
						</li>
						
						<li class="nav-item" id="out">
							<a class="nav-link" id="logout" href="#">退出</a>
						</li>
						<li class="nav-item" id="register">
							<a class="nav-link" href="#">注册</a>
						</li>
					</ul>
				</div>
			</nav>
			<div class="container">
				<div class="row">
				    <div class="col-md-2 left-box">
						<div style="margin: 0px auto; height: 60px;">
	                      
						</div>
						<!-- 左侧导航栏 -->
						<div class="list-group" id="left-nav">

						  </div>
						 
					</div>	
					<div class="col-md-10">
						<div style="margin: 0px auto; height: 30px;">
	
						</div>
						<!-- 主页 -->
						<div class="nav" style="display: block;" id="main-title">
						<!-- Nav tabs -->
							<ul class="nav nav-tabs" role="tablist">
								<li class="nav-item">
								<a class="nav-link active" data-toggle="tab" href="#home">最新</a>
								</li>
								<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#menu1">最热</a>
								</li>
								<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#menu2">站长推荐</a>
								</li>
							</ul>
           
							<!-- Tab panes -->
							<div class="tab-content">
								<div id="home" class="container tab-pane active"><br>

								</div>
								<div id="menu1" class="container tab-pane fade"><br>
									<div class="blogs">
										<figure>
											<img src="images/tushuguan.jpg">
										 </figure>
										 <ul>
										   <h3><a href="/">住在手机里的朋友</a></h3>
											<p>"通信时代，无论是初次相见还是老友重逢，交换联系方式，常常是彼此交换名片，然后郑重或是出于礼貌用手机记下对方的电话号码。在快节奏的生活里，我们不知不觉中就成为住在别人手机里的朋友。又因某些意外，变成了别人手机里匆忙的过客，这种快餐式的友谊 ..."</p>
										   <p class="autor">
											  <span class="lm f_l">
												  <a href="/">谢文</a>
											   </span>
											   <span class="dtime f_l">2016-02-16</span>
											   <span class="viewnum f_r">
												  浏览（<a>666</a>）</span>
											   <span class="pingl f_r">	
												  评论（<a>60</a>）</span>
											</p>
										 </ul>
									 </div>
									<div class="blogs">
										<figure>
											<img src="images/tushuguan.jpg">
										</figure>
										<ul>
											<h3><a href="/">住在手机里的朋友</a></h3>
											<p>"通信时代，无论是初次相见还是老友重逢，交换联系方式，常常是彼此交换名片，然后郑重或是出于礼貌用手机记下对方的电话号码。在快节奏的生活里，我们不知不觉中就成为住在别人手机里的朋友。又因某些意外，变成了别人手机里匆忙的过客，这种快餐式的友谊 ..."</p>
											<p class="autor">
											  <span class="lm f_l">
												  <a href="/">谢文</a>
											   </span>
												<span class="dtime f_l">2016-02-16</span>
												<span class="viewnum f_r">
												  浏览（<a>666</a>）</span>
												<span class="pingl f_r">
												  评论（<a>60</a>）</span>
											</p>
										</ul>
									</div>
									<div class="blogs">
										<figure>
											<img src="images/tushuguan.jpg">
										</figure>
										<ul>
											<h3><a href="/">住在手机里的朋友</a></h3>
											<p>"通信时代，无论是初次相见还是老友重逢，交换联系方式，常常是彼此交换名片，然后郑重或是出于礼貌用手机记下对方的电话号码。在快节奏的生活里，我们不知不觉中就成为住在别人手机里的朋友。又因某些意外，变成了别人手机里匆忙的过客，这种快餐式的友谊 ..."</p>
											<p class="autor">
											  <span class="lm f_l">
												  <a href="/">谢文</a>
											   </span>
												<span class="dtime f_l">2016-02-16</span>
												<span class="viewnum f_r">
												  浏览（<a>666</a>）</span>
												<span class="pingl f_r">
												  评论（<a>60</a>）</span>
											</p>
										</ul>
									</div>
								</div>
								<div id="menu2" class="container tab-pane fade"><br>
									<div class="blogs">
										<figure>
											<img src="images/tushuguan.jpg">
										 </figure>
										 <ul>
										   <h3><a href="/resumeDetails?res_id=1">住在手机里的朋友</a></h3>
											<p>"通信时代，无论是初次相见还是老友重逢，交换联系方式，常常是彼此交换名片，然后郑重或是出于礼貌用手机记下对方的电话号码。在快节奏的生活里，我们不知不觉中就成为住在别人手机里的朋友。又因某些意外，变成了别人手机里匆忙的过客，这种快餐式的友谊 ..."</p>
										   <p class="autor">
											  <span class="lm f_l">
												  <a href="/">个人博客</a>
											   </span>
											   <span class="dtime f_l">2016-02-16</span>
											   <span class="viewnum f_r">
												  浏览（<a href="/">666</a>）</span>
											   <span class="pingl f_r">	
												  评论（<a href="/">60</a>）</span>
											</p>
										 </ul>
									 </div>
									 
								</div>
							</div>
						</div>
						<!-- 分类 -->
						<div id="sub-title" style="display: none;">
                           <div>
							<ol class="breadcrumb">
								<li class="breadcrumb-item bread-home">HOME</li>
								<li class="breadcrumb-item"></li>
								<li class="breadcrumb-item active"></li>
							  </ol>
						   </div>
							<div id="sub_context"></div>
						</div>
						<div style="height: 40px;">

						</div>
					</div>	
				</div>

			</div>
			
		</div>
		<script type="text/javascript">
			$.ajax({
				url: "/getPMenu",
				type: "POST",
				dataType: "json",
				success: function (data) {
					var title = new Array();
					var xx = new Array();
					var result = new Array();
					$.each(data,function (i,data) {
						if(data.title==0){
							title.push(data);
						}else{
							xx.push(data);
						}
					});
					$.each(title,function (i,data) {
						// 插入标题
						result.push(data);
						// 寻找该标题下的子菜单
						getByTitle(data.id,xx);
					});
					function getByTitle(id,arr) {
						$.each(arr,function (i,data) {
							if( data.title == id){
								result.push(data);
							}
						});
					}
					var text="";
					var titleVal ="";
					$.each(result,function(i,navdata){
						if(navdata.title==0){
							text += "<span class=\"list-group-item list-group-item-secondary\">"+navdata.name+"</span>";
							titleVal = navdata.name;
						}else{
							text +=" <p id=\""+navdata.id+"\" class=\"list-group-item list-group-item-light leftNav\" title=\""+titleVal+"\">"+navdata.name+"</p>"
						}
					});
					// 生成左侧菜单栏
					$("#left-nav").append(text);
					$("#left-nav p").each(function (i) {
						var _this = $(this);
						// 每个菜单的点击事件
						_this.click(function () {
							$("#left-nav p").addClass("list-group-item-light");
							$("#left-nav p").removeClass("list-group-item-info");
							_this.removeClass("list-group-item-light")
							_this.addClass("list-group-item-info");
							$("#main-title").hide();
							var breadval = _this.text();
							$(".breadcrumb li").eq(1).html(_this.attr("title"));
							$(".breadcrumb li").eq(2).html(breadval);
							$("#sub-title").show();
							// 根据菜单的id获取该菜单下的内容
							getContentById(_this.attr("id"))
						});
					});
					// 面包屑菜单和导航菜单切换
					$(".breadcrumb li").eq(0).click(function () {
						$("#main-title").show();
						$("#sub-title").hide();
					});
				}
			});

			/**
			 * 根据id请求所属菜单内容
			 * @param id
			 */
			function getContentById(id) {
				if(null != id && "" != id){
					$.ajax({
						url: "/getResumeListById?id=" + id,
						type: "POST",
						dataType: "json",
						contentType: "application/json",
						async:true,
						success: function (data) {
							var text = "";
							if(null == data || "" == data){
								$("#sub_context").html("<h3>什么都没找到......</h3>");
							}else {
								$.each(data, function (i, temp) {
									text += "<div class=\"blogs\"><figure><img src=\"" +temp.img+"\"></figure><ul><h3><a href=\"/resumeDetails?id="+temp.id+"\" target=\"_blank\">"+temp.title+"</a></h3><p>"+
											temp.text+"</p><p class=\"autor\"><span class=\"lm f_l\"><a href=\"/\">"+temp.stuId+"</a></span><span class=\"dtime f_l\">"+
											temp.data+"</span><span class=\"viewnum f_r\">已预约(<a>"+temp.orderNum+"</a>）</span></p></ul></div>"
								});
								$("#sub_context").html(text);
							}
						}
					});
				}
			}
				//延迟加载 TODO 暂时没有用 bug 001
				setTimeout(function(){
					$("#sub_context img").delayLoading({
						defaultImg: "images/bg.png", // 预加载前显示的图片
						errorImg: "images/bg.png", // 读取图片错误时替换图片(默认：与defaultImg一样)
						imgSrcAttr: "originalSrc", //记录图片路径的属性(默认：originalSrc，页面img的src属性也要替换为originalSrc)
						beforehand: 0, // 预先提前多少像素加载图片(默认：0)
						event: "scroll", // 触发加载图片事件(默认：scroll)
						duration: "2000", // 三种预定淡出(入)速度之一的字符串("slow", "normal", or "fast")或表示动画时长的毫秒数值(如：1000),默认:"normal"
						//container: window, // 对象加载的位置容器(默认：window)
						//success: function(imgObj) {}, // 加载图片成功后的回调函数(默认：不执行任何操作)
						error: function(imgObj) {
							console.log("error")
						} // 加载图片失败后的回调函数(默认：不执行任何操作)
					});
				},"500");
		</script>
	</body>

</html>